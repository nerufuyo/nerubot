FROM ghcr.io/lavalink-devs/lavalink:latest

# Expose Lavalink port
EXPOSE 2333

# Default environment variables (can be overridden by Railway)
ENV SERVER_PORT=2333
ENV LAVALINK_SERVER_PASSWORD=youshallnotpass

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
  CMD curl -f http://localhost:2333/version || exit 1

# Start Lavalink
CMD ["java", "-jar", "Lavalink.jar"]
