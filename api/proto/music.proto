syntax = "proto3";

package music;

option go_package = "github.com/nerufuyo/nerubot/api/proto/music";

// Music service definition
service MusicService {
  rpc Play(PlayRequest) returns (PlayResponse);
  rpc Pause(PauseRequest) returns (PauseResponse);
  rpc Resume(ResumeRequest) returns (ResumeResponse);
  rpc Skip(SkipRequest) returns (SkipResponse);
  rpc Stop(StopRequest) returns (StopResponse);
  rpc Queue(QueueRequest) returns (QueueResponse);
  rpc NowPlaying(NowPlayingRequest) returns (NowPlayingResponse);
  rpc GetQueue(GetQueueRequest) returns (GetQueueResponse);
  rpc SetLoop(SetLoopRequest) returns (SetLoopResponse);
  rpc SetVolume(SetVolumeRequest) returns (SetVolumeResponse);
  rpc HealthCheck(HealthCheckRequest) returns (HealthCheckResponse);
}

// Play Request
message PlayRequest {
  string guild_id = 1;
  string song_url = 2;
  string requested_by = 3;
  string channel_id = 4;
}

message PlayResponse {
  bool success = 1;
  string message = 2;
  Song song = 3;
}

// Pause Request
message PauseRequest {
  string guild_id = 1;
}

message PauseResponse {
  bool success = 1;
  string message = 2;
}

// Resume Request
message ResumeRequest {
  string guild_id = 1;
}

message ResumeResponse {
  bool success = 1;
  string message = 2;
}

// Skip Request
message SkipRequest {
  string guild_id = 1;
}

message SkipResponse {
  bool success = 1;
  string message = 2;
  Song next_song = 3;
}

// Stop Request
message StopRequest {
  string guild_id = 1;
}

message StopResponse {
  bool success = 1;
  string message = 2;
}

// Queue Request
message QueueRequest {
  string guild_id = 1;
  string song_url = 2;
  string requested_by = 3;
}

message QueueResponse {
  bool success = 1;
  string message = 2;
  int32 position = 3;
}

// Now Playing Request
message NowPlayingRequest {
  string guild_id = 1;
}

message NowPlayingResponse {
  bool is_playing = 1;
  Song current_song = 2;
  string loop_mode = 3;
  int32 volume = 4;
}

// Get Queue Request
message GetQueueRequest {
  string guild_id = 1;
}

message GetQueueResponse {
  repeated Song songs = 1;
  int32 total_songs = 2;
}

// Set Loop Request
message SetLoopRequest {
  string guild_id = 1;
  string loop_mode = 2; // "none", "single", "queue"
}

message SetLoopResponse {
  bool success = 1;
  string message = 2;
  string loop_mode = 3;
}

// Set Volume Request
message SetVolumeRequest {
  string guild_id = 1;
  int32 volume = 2; // 0-100
}

message SetVolumeResponse {
  bool success = 1;
  string message = 2;
  int32 volume = 3;
}

// Health Check
message HealthCheckRequest {}

message HealthCheckResponse {
  bool healthy = 1;
  string service = 2;
  string version = 3;
}

// Common message types
message Song {
  int32 id = 1;
  string title = 2;
  string url = 3;
  string requested_by = 4;
  string added_at = 5;
  int32 duration = 6;
  string thumbnail = 7;
}
